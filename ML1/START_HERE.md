# üéâ Your Code is Ready!

–Ø —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞–ª –≤–∞—à –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **–¥–≤—É–º—è –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**! 

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
1. **preprocess.py** - —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ (transactions.csv + client_activity.csv)
2. **train.py** - –æ–±—É—á–∞–µ—Ç –¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
3. **infer_service.py** - API —Å 4 endpoints –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤

### ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üéØ **–î–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥–µ–ª–∏** - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
- üì° **API —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ endpoints**:
  - `/predict/transaction` - –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - `/predict/client_activity` - –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
  - `/predict/combined` - –¥–ª—è –æ–±–æ–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  - `/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- üìä **SHAP –æ–±—ä—è—Å–Ω–µ–Ω–∏—è** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
- üéõÔ∏è **–ì–∏–±–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π

### üìö –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `README_MULTI_DATASET.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `ARCHITECTURE.md` - –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ flow
- `CHANGES.md` - –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `SUMMARY.md` - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
- `QUICK_REFERENCE.md` - —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥
- `CHECKLIST.md` - —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
- `example_usage.py` - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- `test_api.py` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `run_pipeline.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è pipeline

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 —à–∞–≥–∞)

### 1Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
```bash
python preprocess.py
```
–°–æ–∑–¥–∞—Å—Ç: `processed_transactions.parquet` –∏ `processed_client_activity.parquet`

### 2Ô∏è‚É£ –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏
```bash
python train.py --dataset both --ensemble
```
–°–æ–∑–¥–∞—Å—Ç –º–æ–¥–µ–ª–∏ –≤: `models/transactions/` –∏ `models/client_activity/`

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å API
```bash
python infer_service.py
```
–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:8000`

---

## üí¨ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ß–µ—Ä–µ–∑ curl (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

**–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**
```bash
curl -X POST http://localhost:8000/predict/transaction \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {
      "amount": 50000.0,
      "timestamp": "2025-11-28T14:30:00",
      "src_account_id": "user_123",
      "beneficiary_id": "benef_456"
    }
  }'
```

**–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞:**
```bash
curl -X POST http://localhost:8000/predict/client_activity \
  -H "Content-Type: application/json" \
  -d '{
    "activity": {
      "timestamp": "2025-11-28T14:30:00",
      "src_account_id": "user_123",
      "logins_last_7_days": 5,
      "logins_last_30_days": 20,
      "login_frequency_7d": 0.71
    }
  }'
```

**–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (–æ–±–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö):**
```bash
curl -X POST http://localhost:8000/predict/combined \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {...},
    "activity": {...}
  }'
```

### –ß–µ—Ä–µ–∑ Python
```python
import requests

response = requests.post(
    "http://localhost:8000/predict/transaction",
    json={"transaction": {"amount": 5000, "timestamp": "2025-11-28T12:00:00"}}
)

result = response.json()
print(f"Fraud probability: {result['probability']:.2%}")
print(f"Action: {result['action']}")
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚úì preprocess.py (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚úì train.py (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚úì infer_service.py (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚úì test_api.py (–Ω–æ–≤–æ–µ)
‚úì example_usage.py (–Ω–æ–≤–æ–µ)
‚úì run_pipeline.sh (–Ω–æ–≤–æ–µ)

‚úì README_MULTI_DATASET.md (–Ω–æ–≤–æ–µ)
‚úì ARCHITECTURE.md (–Ω–æ–≤–æ–µ)
‚úì CHANGES.md (–Ω–æ–≤–æ–µ)
‚úì SUMMARY.md (–Ω–æ–≤–æ–µ)
‚úì QUICK_REFERENCE.md (–Ω–æ–≤–æ–µ)
‚úì CHECKLIST.md (–Ω–æ–≤–æ–µ)
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------|------|-------|
| –î–∞—Ç–∞—Å–µ—Ç—ã | 1 | 2 ‚úì |
| Preprocessing —Ñ—É–Ω–∫—Ü–∏–∏ | 1 | 2 ‚úì |
| –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–¥–µ–ª–µ–π | 1 | 2 ‚úì |
| API endpoints | 1 | 4 ‚úì |
| –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ | –ù–µ—Ç | –î–∞ ‚úì |
| SHAP –æ–±—ä—è—Å–Ω–µ–Ω–∏—è | –ë–∞–∑–æ–≤—ã–µ | –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ ‚úì |

---

## üìñ –ì–¥–µ —á—Ç–æ –Ω–∞–π—Ç–∏

### –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è?
‚Üí –ß–∏—Ç–∞–π—Ç–µ **README_MULTI_DATASET.md**

### –ù—É–∂–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞?
‚Üí –°–º–æ—Ç—Ä–∏—Ç–µ **example_usage.py**

### –ù—É–∂–Ω—ã –∫–æ–º–∞–Ω–¥—ã?
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **QUICK_REFERENCE.md**

### –•–æ—Ç–∏—Ç–µ –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?
‚Üí –°–º–æ—Ç—Ä–∏—Ç–µ **ARCHITECTURE.md**

### –•–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?
‚Üí –ß–∏—Ç–∞–π—Ç–µ **CHANGES.md**

### –ù—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API?
‚Üí –ó–∞–ø—É—Å—Ç–∏—Ç–µ **test_api.py**

### –ù—É–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è?
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **run_pipeline.sh**

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- ‚úì Preprocessing –æ–±–æ–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
- ‚úì –û–±—É—á–µ–Ω–∏–µ –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥–µ–ª–µ–π
- ‚úì API –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤
- ‚úì SHAP –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- ‚úì –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ—Ä–æ–≥–∞
- ‚úì Ensemble –º–æ–¥–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úì –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û–±—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```bash
python train.py --dataset transactions
```

### –û–±—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
```bash
python train.py --dataset client_activity
```

### Optimize –¥–ª—è recall (–ª–æ–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ñ—Ä–æ–¥–∞)
```bash
python train.py --dataset both --threshold_strategy recall --min_recall 0.5
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ LightGBM (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏)
```bash
python train.py --dataset both  # –±–µ–∑ --ensemble —Ñ–ª–∞–≥–∞
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π pipeline
```bash
./run_pipeline.sh both --ensemble
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
```bash
python test_api.py
```

---

## üí° –°–æ–≤–µ—Ç—ã

1. **–î–ª—è –Ω–∞—á–∞–ª–∞**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ 3 —à–∞–≥–∞ –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
2. **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_api.py` –∏–ª–∏ `curl`
3. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞**: –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `--ensemble` –¥–ª—è –ª—É—á—à–µ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
4. **–î–ª—è –æ—Ç–ª–∞–¥–∫–∏**: –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π
5. **–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å `--threshold_strategy`

---

## üìä Response Example

```json
{
  "probability": 0.35,
  "threshold": 0.45,
  "action": "allow",
  "explanations": [
    {
      "feature": "amount",
      "shap_value": 0.15
    },
    {
      "feature": "is_new_beneficiary",
      "shap_value": 0.12
    },
    {
      "feature": "hour",
      "shap_value": -0.05
    }
  ]
}
```

---

## üéì Learning Resources

- `QUICK_REFERENCE.md` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
- `ARCHITECTURE.md` - –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
- `example_usage.py` - –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞
- `test_api.py` - –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤ API calls

---

## üöÄ Ready to Go!

–í—Å—ë –≥–æ—Ç–æ–≤–æ! –ù–∞—á–Ω–∏—Ç–µ —Å:

```bash
# –®–∞–≥ 1
python preprocess.py

# –®–∞–≥ 2  
python train.py --dataset both --ensemble

# –®–∞–≥ 3
python infer_service.py
```

–£—Å–ø–µ—Ö–æ–≤ –≤ —Ä–∞–±–æ—Ç–µ! üéâ

---

## üìû –í–æ–ø—Ä–æ—Å—ã?

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –µ—Å—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- QUICK_REFERENCE.md - –∫–æ–º–∞–Ω–¥—ã
- README_MULTI_DATASET.md - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- example_usage.py - –ø—Ä–∏–º–µ—Ä—ã
- CHECKLIST.md - troubleshooting

---

**Status**: ‚úÖ Ready to Use  
**Last Updated**: 2025-11-28  
**Version**: 2.0 (Multi-Dataset Support)
