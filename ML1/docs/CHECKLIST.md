# Checklist –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### Core Changes (–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

- [x] **preprocess.py** - –ø–µ—Ä–µ–¥–µ–ª–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–≤—É–º—è –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏
  - [x] –§—É–Ω–∫—Ü–∏—è `preprocess_transactions()` –¥–ª—è transacti onssions.csv
  - [x] –§—É–Ω–∫—Ü–∏—è `preprocess_client_activity()` –¥–ª—è client_activity.csv
  - [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `--transactions_input`, `--client_activity_input`
  - [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `--transactions_output`, `--client_activity_output`
  - [x] –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞: `processed_transactions.parquet` –∏ `processed_client_activity.parquet`

- [x] **train.py** - –ø–µ—Ä–µ–¥–µ–ª–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π
  - [x] –ü–∞—Ä–∞–º–µ—Ç—Ä: `--dataset {transactions|client_activity|both}`
  - [x] –û–±—É—á–∞–µ—Ç –º–æ–¥–µ–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö:
    - [x] `models/transactions/`
    - [x] `models/client_activity/`
  - [x] –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç:
    - [x] –û–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å (lightgbm_model.txt)
    - [x] Ensemble –º–æ–¥–µ–ª–∏ (–µ—Å–ª–∏ `--ensemble`)
    - [x] model_meta.pkl (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
    - [x] shap_background.pkl (–¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π)
    - [x] feature_importance.csv

- [x] **infer_service.py** - –ø–µ—Ä–µ–¥–µ–ª–∞–Ω –¥–ª—è –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π
  - [x] –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±–µ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
  - [x] Endpoint `/predict/transaction` –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - [x] Endpoint `/predict/client_activity` –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - [x] Endpoint `/predict/combined` –¥–ª—è –æ–±–æ–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
  - [x] Endpoint `/health` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
  - [x] –§—É–Ω–∫—Ü–∏—è `compute_realtime_features()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤
  - [x] SHAP –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

### Documentation (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

- [x] **README_MULTI_DATASET.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - [x] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ preprocessing
  - [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è
  - [x] API endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
  - [x] Response format
  - [x] –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

- [x] **CHANGES.md** - –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - [x] –†–µ–∑—é–º–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
  - [x] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

- [x] **ARCHITECTURE.md** - –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
  - [x] Data pipeline
  - [x] Training flow
  - [x] Inference flow
  - [x] Feature sets
  - [x] Model structure

- [x] **example_usage.py** - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
  - [x] –ü—Ä–∏–º–µ—Ä—ã preprocessing
  - [x] –ü—Ä–∏–º–µ—Ä—ã –æ–±—É—á–µ–Ω–∏—è
  - [x] –ü—Ä–∏–º–µ—Ä—ã API calls
  - [x] –ü—Ä–∏–º–µ—Ä—ã Python API
  - [x] –ü–æ—è—Å–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### Helper Scripts (–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã)

- [x] **run_pipeline.sh** - bash —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ pipeline
  - [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö
  - [x] –ó–∞–ø—É—Å–∫ preprocessing
  - [x] –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è
  - [x] –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

- [x] **test_api.py** - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
  - [x] Health check
  - [x] –¢–µ—Å—Ç transaction prediction
  - [x] –¢–µ—Å—Ç client_activity prediction
  - [x] –¢–µ—Å—Ç combined prediction
  - [x] –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### Preprocessing
```bash
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
./scripts/run_preprocess.sh --help 2>/dev/null || python src/preprocess.py --help
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
# - --transactions_input
# - --client_activity_input
# - --transactions_output
# - --client_activity_output
```

### Training
```bash
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–±–æ—Ä –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
./scripts/run_train.sh --help 2>/dev/null || python src/train.py --help
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - --dataset {transactions|client_activity|both}
# - --processed_transactions
# - --processed_client_activity
```

### Inference
```bash
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å endpoints (start service via wrapper)
./scripts/run_service.sh &
# Or run directly: python src/infer_service.py
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å endpoints:
# - GET /health
# - POST /predict/transaction
# - POST /predict/client_activity
# - POST /predict/combined
```

---

## üìã Workflow –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –û–±—É—á–∏—Ç—å –æ–±–µ –º–æ–¥–µ–ª–∏
```bash
python preprocess.py
python train.py --dataset both --ensemble
python infer_service.py
```

### –ü—Ä–∏–º–µ—Ä 2: –û–±—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```bash
python preprocess.py
python train.py --dataset transactions
python infer_service.py
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pipeline —Å–∫—Ä–∏–ø—Ç
```bash
./run_pipeline.sh both --ensemble
python infer_service.py
python test_api.py
```

---

## üêõ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã –∏ –†–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ
**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ –ø—Ä–∏ preprocessing
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `data/transactions.csv` –∏ `data/client_activity.csv` —Å—É—â–µ—Å—Ç–≤—É—é—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–≤–µ—Ä–Ω—ã–µ –∏–º–µ–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤
**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ KeyError –ø—Ä–∏ preprocessing
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ CSV (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è encoding="windows-1251")

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–æ–¥–µ–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ inference —Å–µ—Ä–≤–∏—Å
**–°–∏–º–ø—Ç–æ–º**: 400 –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å –∏ –º–æ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `models/`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
**–°–∏–º–ø—Ç–æ–º**: ConnectionError –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω: `python infer_service.py`

---

## ‚ú® –ù–æ–≤—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –Ω–∞–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π** - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
2. **–ï–¥–∏–Ω—ã–π API** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ç–∏–ø–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ endpoints
3. **–ì–∏–±–∫–∏–π pipeline** - –º–æ–∂–Ω–æ –æ–±—É—á–∞—Ç—å –ª—é–±–æ–π –Ω–∞–±–æ—Ä –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã
5. **SHAP –æ–±—ä—è—Å–Ω–µ–Ω–∏—è** - —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
6. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è** - –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –æ–±–∞ —Ç–∏–ø–∞ –≤ –æ–¥–Ω–æ–º call

---

## üìö –§–∞–π–ª—ã –¥–ª—è –ß—Ç–µ–Ω–∏—è

1. **README_MULTI_DATASET.md** - –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
2. **CHANGES.md** - –¥–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ
3. **ARCHITECTURE.md** - –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ flow'—ã
4. **example_usage.py** - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
5. **test_api.py** - –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –†–∞–∑–ª–∏—á–∏—è –æ—Ç –û—Ä–∏–≥–∏–Ω–∞–ª–∞

| –ê—Å–ø–µ–∫—Ç | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|--------|------|-------|
| **–î–∞—Ç–∞—Å–µ—Ç—ã** | 1 (transactions) | 2 (transactions + client_activity) |
| **Preprocessing** | 1 —Ñ—É–Ω–∫—Ü–∏—è | 2 —Ñ—É–Ω–∫—Ü–∏–∏ |
| **–ú–æ–¥–µ–ª–∏** | 1 –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è | 2 –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ |
| **API endpoints** | 1 (/predict) | 4 (/predict/transaction, /predict/client_activity, /predict/combined, /health) |
| **–ü—Ä–∏–∑–Ω–∞–∫–∏** | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ | –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ |
| **Training** | –û–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç | 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ (both, transactions, client_activity) |

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

- [x] –û–±–∞ CSV —Ñ–∞–π–ª–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `data/`
- [x] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install -r requirements.txt`)
- [x] Python –≤–µ—Ä—Å–∏—è >= 3.7
- [x] –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–¥–µ–ª–µ–π (~500 MB)
- [x] FastAPI/Uvicorn —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (–¥–ª—è inference —Å–µ—Ä–≤–∏—Å–∞)

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–µ–ª–∞–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–≤—É–º—è –¥–∞—Ç–∞—Å–µ—Ç–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å preprocessing
2. –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å inference —Å–µ—Ä–≤–∏—Å
4. –ù–∞—á–∞—Ç—å –¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è!
